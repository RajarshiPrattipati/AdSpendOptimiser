DATABASE CONNECTION FIX FOR NETLIFY
=====================================

ERROR: "FATAL: Tenant or user not found"
This means DATABASE_URL in Netlify is WRONG or NOT SET.

EXACT STEPS TO FIX:
===================

1. Go to: https://app.netlify.com/sites/adspendoptimiser/settings/env

2. Find the variable named: DATABASE_URL

3. If it exists, click "Edit" (three dots menu)
   If it doesn't exist, click "Add a variable"

4. Set the value to EXACTLY this (copy-paste):

postgresql://postgres.otleprdqubsrygwedqsa:btZnCjHCDqRfUNFF@aws-0-ap-southeast-2.pooler.supabase.com:6543/postgres

IMPORTANT CHECKS:
- Username is: postgres.otleprdqubsrygwedqsa (with DOT)
- Host is: aws-0-ap-southeast-2.pooler.supabase.com (pooler subdomain)
- Port is: 6543 (NOT 5432)
- Database is: postgres

5. Also add DIRECT_DATABASE_URL if missing:

postgresql://postgres:btZnCjHCDqRfUNFF@db.otleprdqubsrygwedqsa.supabase.co:5432/postgres

6. Click "Save"

7. Go to "Deploys" tab

8. Click "Trigger deploy" â†’ "Clear cache and deploy site"

9. Wait for deployment to complete

10. Test at: https://adspendoptimiser.netlify.app/api/debug/db

Expected result:
{
  "success": true,
  "message": "Database connection successful"
}

If you still see errors, screenshot the DATABASE_URL value from Netlify settings
(blur the password) so I can verify it's correct.
